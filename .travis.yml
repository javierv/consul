language: ruby
addons:
  postgresql: '9.4'
  chrome: stable
rvm:
- 2.3.2
cache: bundler
bundler_args: --without development
before_script:
- wget -N https://chromedriver.storage.googleapis.com/2.36/chromedriver_linux64.zip -P ~/
- unzip ~/chromedriver_linux64.zip -d ~/
- rm ~/chromedriver_linux64.zip
- sudo mv -f ~/chromedriver /usr/local/share/
- sudo chmod +x /usr/local/share/chromedriver
- sudo ln -s /usr/local/share/chromedriver /usr/local/bin/chromedriver
- for i in config/*.example; do cp "$i" "${i/.example}"; done
- bundle exec rake db:setup
script:
- "bundle exec rake assets:precompile RAILS_ENV=test > /dev/null 2>&1"
- "bundle exec rspec ./spec/features/moderation/proposals_spec.rb:15 ./spec/features/comments/legislation_questions_spec.rb:266 ./spec/features/comments/legislation_questions_spec.rb:282 ./spec/features/comments/legislation_questions_spec.rb:177 ./spec/features/comments/legislation_questions_spec.rb:190 ./spec/features/comments/legislation_questions_spec.rb:324 ./spec/features/comments/legislation_questions_spec.rb:239 ./spec/features/comments/legislation_questions_spec.rb:299 ./spec/features/comments/legislation_questions_spec.rb:217 ./spec/features/comments/legislation_questions_spec.rb:516 ./spec/features/comments/legislation_questions_spec.rb:497 ./spec/features/comments/legislation_questions_spec.rb:479 ./spec/features/comments/legislation_questions_spec.rb:413 ./spec/features/comments/legislation_questions_spec.rb:395 ./spec/features/comments/legislation_questions_spec.rb:357 ./spec/features/comments/legislation_questions_spec.rb:339 ./spec/features/admin/budget_investments_spec.rb:779 ./spec/features/admin/budget_investments_spec.rb:807 ./spec/features/admin/budget_investments_spec.rb:981 ./spec/features/admin/budget_investments_spec.rb:1024 ./spec/features/admin/budget_investments_spec.rb:1141 ./spec/features/admin/budget_investments_spec.rb:1161 ./spec/features/admin/budget_investments_spec.rb:947 ./spec/features/admin/budget_investments_spec.rb:929 ./spec/features/admin/budget_investments_spec.rb:880 ./spec/features/admin/budget_investments_spec.rb:842 ./spec/features/admin/budget_investments_spec.rb:386 ./spec/features/legislation/draft_versions_spec.rb:225 ./spec/features/legislation/draft_versions_spec.rb:146 ./spec/features/legislation/draft_versions_spec.rb:182 ./spec/features/legislation/draft_versions_spec.rb:201 ./spec/features/legislation/draft_versions_spec.rb:158 ./spec/features/legislation/draft_versions_spec.rb:58 ./spec/features/debates_spec.rb:323 ./spec/features/debates_spec.rb:306 ./spec/features/debates_spec.rb:869 ./spec/features/debates_spec.rb:849 ./spec/features/debates_spec.rb:379 ./spec/features/debates_spec.rb:357 ./spec/features/debates_spec.rb:418 ./spec/features/debates_spec.rb:440 ./spec/features/debates_spec.rb:430 ./spec/features/debates_spec.rb:1019 ./spec/features/debates_spec.rb:998 ./spec/features/comments/topics_spec.rb:857 ./spec/features/comments/topics_spec.rb:765 ./spec/features/comments/topics_spec.rb:736 ./spec/features/comments/topics_spec.rb:789 ./spec/features/comments/topics_spec.rb:838 ./spec/features/comments/topics_spec.rb:754 ./spec/features/comments/topics_spec.rb:820 ./spec/features/comments/topics_spec.rb:911 ./spec/features/comments/topics_spec.rb:891 ./spec/features/comments/topics_spec.rb:953 ./spec/features/comments/topics_spec.rb:973 ./spec/features/comments/topics_spec.rb:1045 ./spec/features/comments/topics_spec.rb:1082 ./spec/features/comments/topics_spec.rb:1063 ./spec/features/polls/results_spec.rb:4 ./spec/features/admin/budget_groups_spec.rb:59 ./spec/features/admin/poll/polls_spec.rb:10 ./spec/features/admin/poll/polls_spec.rb:21 ./spec/features/admin/poll/polls_spec.rb:315 ./spec/features/admin/poll/polls_spec.rb:307 ./spec/features/admin/poll/polls_spec.rb:260 ./spec/features/admin/poll/polls_spec.rb:252 ./spec/features/admin/poll/polls_spec.rb:204 ./spec/features/admin/poll/polls_spec.rb:196 ./spec/features/management/account_spec.rb:73 ./spec/features/comments/polls_spec.rb:218 ./spec/features/comments/polls_spec.rb:171 ./spec/features/comments/polls_spec.rb:187 ./spec/features/comments/polls_spec.rb:196 ./spec/features/comments/polls_spec.rb:483 ./spec/features/comments/polls_spec.rb:502 ./spec/features/comments/polls_spec.rb:465 ./spec/features/emails_spec.rb:185 ./spec/features/emails_spec.rb:205 ./spec/features/emails_spec.rb:198 ./spec/features/emails_spec.rb:464 ./spec/features/comments/legislation_annotations_spec.rb:204 ./spec/features/comments/legislation_annotations_spec.rb:287 ./spec/features/comments/legislation_annotations_spec.rb:305 ./spec/features/comments/legislation_annotations_spec.rb:354 ./spec/features/comments/legislation_annotations_spec.rb:219 ./spec/features/comments/legislation_annotations_spec.rb:230 ./spec/features/comments/legislation_annotations_spec.rb:255 ./spec/features/comments/legislation_annotations_spec.rb:456 ./spec/features/comments/legislation_annotations_spec.rb:436 ./spec/features/comments/legislation_annotations_spec.rb:621 ./spec/features/comments/legislation_annotations_spec.rb:631 ./spec/features/comments/legislation_annotations_spec.rb:668 ./spec/features/comments/legislation_annotations_spec.rb:393 ./spec/features/comments/legislation_annotations_spec.rb:373 ./spec/features/comments/legislation_annotations_spec.rb:529 ./spec/features/comments/legislation_annotations_spec.rb:570 ./spec/features/comments/legislation_annotations_spec.rb:549 ./spec/features/admin/poll/shifts_spec.rb:126 ./spec/features/admin/poll/shifts_spec.rb:33 ./spec/features/admin/poll/shifts_spec.rb:95 ./spec/features/admin/poll/questions/answers/images/images_spec.rb:32 ./spec/features/admin/poll/questions/answers/images/images_spec.rb:49 ./spec/features/comments/debates_spec.rb:192 ./spec/features/comments/debates_spec.rb:241 ./spec/features/comments/debates_spec.rb:214 ./spec/features/comments/debates_spec.rb:183 ./spec/features/comments/debates_spec.rb:274 ./spec/features/comments/debates_spec.rb:170 ./spec/features/comments/debates_spec.rb:300 ./spec/features/comments/debates_spec.rb:257 ./spec/features/comments/debates_spec.rb:316 ./spec/features/comments/debates_spec.rb:334 ./spec/features/comments/debates_spec.rb:390 ./spec/features/comments/debates_spec.rb:372 ./spec/features/comments/debates_spec.rb:493 ./spec/features/comments/debates_spec.rb:474 ./spec/features/comments/debates_spec.rb:456 ./spec/features/tags/budget_investments_spec.rb:103 ./spec/features/tags/budget_investments_spec.rb:82 ./spec/features/tags/budget_investments_spec.rb:128 ./spec/features/budgets/investments_spec.rb:554 ./spec/features/budgets/investments_spec.rb:594 ./spec/features/budgets/investments_spec.rb:573 ./spec/features/budgets/investments_spec.rb:536 ./spec/features/budgets/investments_spec.rb:1312 ./spec/features/comments/budget_investments_spec.rb:249 ./spec/features/comments/budget_investments_spec.rb:200 ./spec/features/comments/budget_investments_spec.rb:265 ./spec/features/comments/budget_investments_spec.rb:175 ./spec/features/comments/budget_investments_spec.rb:222 ./spec/features/comments/budget_investments_spec.rb:191 ./spec/features/comments/budget_investments_spec.rb:282 ./spec/features/comments/budget_investments_spec.rb:309 ./spec/features/comments/budget_investments_spec.rb:327 ./spec/features/comments/budget_investments_spec.rb:365 ./spec/features/comments/budget_investments_spec.rb:383 ./spec/features/comments/budget_investments_spec.rb:451 ./spec/features/comments/budget_investments_spec.rb:469 ./spec/features/comments/budget_investments_spec.rb:488 ./spec/features/budgets/votes_spec.rb:152 ./spec/features/budgets/votes_spec.rb:121 ./spec/features/budgets/results_spec.rb:76 ./spec/features/budgets/results_spec.rb:36 ./spec/features/comments/topics_spec.rb:239 ./spec/features/comments/topics_spec.rb:288 ./spec/features/comments/topics_spec.rb:270 ./spec/features/comments/topics_spec.rb:204 ./spec/features/comments/topics_spec.rb:186 ./spec/features/comments/topics_spec.rb:307 ./spec/features/comments/topics_spec.rb:215 ./spec/features/comments/topics_spec.rb:423 ./spec/features/comments/topics_spec.rb:403 ./spec/features/comments/topics_spec.rb:532 ./spec/features/comments/topics_spec.rb:495 ./spec/features/comments/topics_spec.rb:513 ./spec/features/comments/topics_spec.rb:361 ./spec/features/comments/topics_spec.rb:341 ./spec/features/officing_spec.rb:125 ./spec/features/budgets/ballots_spec.rb:367 ./spec/features/budgets/ballots_spec.rb:422 ./spec/features/budgets/ballots_spec.rb:385 ./spec/features/budgets/ballots_spec.rb:267 ./spec/features/budgets/ballots_spec.rb:253 ./spec/features/budgets/ballots_spec.rb:233 ./spec/features/budgets/ballots_spec.rb:169 ./spec/features/budgets/ballots_spec.rb:133 ./spec/features/budgets/ballots_spec.rb:104 ./spec/features/budgets/ballots_spec.rb:595 ./spec/features/budgets/ballots_spec.rb:624 ./spec/features/budgets/ballots_spec.rb:544 ./spec/features/budgets/ballots_spec.rb:567 ./spec/features/polls/polls_spec.rb:275 ./spec/features/polls/polls_spec.rb:294 ./spec/features/polls/polls_spec.rb:318 ./spec/features/polls/polls_spec.rb:359 ./spec/features/admin/poll/booth_assigments_spec.rb:15 ./spec/features/admin/poll/booth_assigments_spec.rb:34 ./spec/features/admin/poll/booth_assigments_spec.rb:71 ./spec/features/admin/poll/booth_assigments_spec.rb:110 ./spec/features/votes_spec.rb:82 ./spec/features/votes_spec.rb:138 ./spec/features/votes_spec.rb:156 ./spec/features/votes_spec.rb:101 ./spec/features/votes_spec.rb:435 ./spec/features/votes_spec.rb:424 ./spec/features/votes_spec.rb:401 ./spec/features/votes_spec.rb:239 ./spec/features/votes_spec.rb:217 ./spec/features/votes_spec.rb:250 ./spec/features/votes_spec.rb:263 ./spec/features/admin/budgets_spec.rb:286 ./spec/features/admin/budgets_spec.rb:260 ./spec/features/admin/budgets_spec.rb:227 ./spec/features/comments/budget_investments_valuation_spec.rb:260 ./spec/features/comments/budget_investments_valuation_spec.rb:276 ./spec/features/comments/budget_investments_valuation_spec.rb:171 ./spec/features/comments/budget_investments_valuation_spec.rb:216 ./spec/features/comments/budget_investments_valuation_spec.rb:193 ./spec/features/comments/budget_investments_valuation_spec.rb:185 ./spec/features/registration_form_spec.rb:17 ./spec/features/registration_form_spec.rb:5 ./spec/features/proposal_notifications_spec.rb:200 ./spec/features/proposal_notifications_spec.rb:311 ./spec/features/proposal_notifications_spec.rb:257 ./spec/features/admin/poll/officer_assignments_spec.rb:35 ./spec/features/proposals_spec.rb:1408 ./spec/features/proposals_spec.rb:1373 ./spec/features/proposals_spec.rb:1390 ./spec/features/proposals_spec.rb:1300 ./spec/features/proposals_spec.rb:1320 ./spec/features/proposals_spec.rb:1565 ./spec/features/proposals_spec.rb:1586 ./spec/features/proposals_spec.rb:679 ./spec/features/proposals_spec.rb:702 ./spec/features/proposals_spec.rb:754 ./spec/features/proposals_spec.rb:742 ./spec/features/proposals_spec.rb:764 ./spec/features/admin/banners_spec.rb:105 ./spec/features/moderation/comments_spec.rb:5 ./spec/features/admin/legislation/processes_spec.rb:103 ./spec/features/admin/legislation/processes_spec.rb:76 ./spec/features/tags/proposals_spec.rb:90 ./spec/features/admin/legislation/questions_spec.rb:71 ./spec/features/valuation/budget_investments_spec.rb:93 ./spec/features/officing/voters_spec.rb:17 ./spec/features/admin/legislation/draft_versions_spec.rb:70 ./spec/features/ckeditor_spec.rb:5 ./spec/features/admin/poll/officers_spec.rb:19 ./spec/features/admin/widgets/cards_spec.rb:10 ./spec/features/admin/activity_spec.rb:73 ./spec/features/admin/activity_spec.rb:135 ./spec/features/admin/activity_spec.rb:11 ./spec/features/comments/proposals_spec.rb:194 ./spec/features/comments/proposals_spec.rb:216 ./spec/features/comments/proposals_spec.rb:243 ./spec/features/comments/proposals_spec.rb:276 ./spec/features/comments/proposals_spec.rb:259 ./spec/features/comments/proposals_spec.rb:185 ./spec/features/comments/proposals_spec.rb:169 ./spec/features/comments/proposals_spec.rb:444 ./spec/features/comments/proposals_spec.rb:462 ./spec/features/comments/proposals_spec.rb:481 ./spec/features/comments/proposals_spec.rb:359 ./spec/features/comments/proposals_spec.rb:377 ./spec/features/comments/proposals_spec.rb:321 ./spec/features/comments/proposals_spec.rb:303 ./spec/features/notifications_spec.rb:56 ./spec/features/notifications_spec.rb:83 ./spec/features/admin/homepage/homepage_spec.rb:43 ./spec/features/admin/homepage/homepage_spec.rb:27 ./spec/features/moderation/debates_spec.rb:15 ./spec/features/polls/voter_spec.rb:56 ./spec/features/polls/voter_spec.rb:138 ./spec/features/polls/voter_spec.rb:21 ./spec/features/polls/voter_spec.rb:96 ./spec/features/polls/voter_spec.rb:112 ./spec/features/polls/voter_spec.rb:79"
notifications:
  email: false
